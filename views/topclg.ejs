<%- include('head') %>
  <style>
    .sk-topclg a {
      text-decoration: none;
    }

    .slider {
      height: 60vh;
    }

    .searchOption:nth-child(3) {
      border-radius: 0 20px 20px 0;
    }

    .searchOption:nth-child(2) {
      border-radius: 0;
    }

    .searchOption {
      line-height: 14px;
      border-radius: 20px 0 0 20px;
      padding: 9px;
      border: 0.4000000059604645px solid #707070;
      box-shadow: 0px 0px 8px #00000029;
    }

    .btn-search {
      background-color: #f7931e;
      color: #ffffff;
      line-height: 14px;
      width: 120px;
      padding: 10px;
    }

    .btn-black {
      background-color: #002f26;
      color: white;
      line-height: 14px;
      width: 120px;
      padding: 10px;
    }

    .sk-topclg input {
      width: 345px;
      border-radius: 20px;
      border: none;
      border: 0.4000000059604645px solid #707070;
      padding: 9px;
    }

    .sk-topclg h1,
    .sk-topclg h2,
    .sk-topclg h4,
    .sk-topclg h5,
    .sk-topclg h6,
    .sk-topclg p {
      margin: 0;
    }

    .minipara {
      font-size: 12px;
    }

    .minisection {
      border: 1px solid;
      margin: auto;
    }

    .minisection1 {
      width: 99%;
      border: 1px solid;
      margin: auto;
    }

    .hoverefct {
      color: #f7931e;
    }

    #hoverefct:hover * {
      color: #00e942;
      stroke: #00e942;
      fill: #00e942;
    }

    #hoverefct:hover .svgg {
      margin-left: 6px;
    }

    .selection {
      background: #fdfdfd;
      text-align: center;
      min-width: fit-content;
      max-width: 151px;
      box-shadow: 0px 0px 1px;
      margin: 1px 5px 1px 5px;
      border-radius: 15px;
      padding: 5px 10px;
      font-size: small;
    }

    .clgBorderBox {
      border-right: 1px solid;
    }

    .mbaOption {
      align-self: end;
    }

    .TopClg {
      font-size: 55px;
    }

    .filterDiv {
      width: 50%;
    }

    /* compare style */
    #myDiv {
      display: none;
    }

    @media only screen and (max-width: 486px) {
      .minipara {
        padding: 0;
        margin: 5px;
      }

      .selection {
        display: flex;
        align-items: center;
        background: #fdfdfd;
        margin: 19px;
        border-radius: 33px;
        text-align: center;
        padding: 10px 20px;
        min-width: fit-content;
        max-width: 151px;
        box-shadow: 0px 0px 1px;
      }

      /* input {
            width: 345px;
            border-radius: 20px;
            border: none;
            border: 0.4000000059604645px solid #707070;
            padding: 4px;
        } */

      .mbaOption {
        align-self: end;
      }

      /* .btn {
            padding: 9px;
        } */

      .filterDiv {
        width: 300px;
      }

      .fillterBox {
        width: 320px;
        right: 4%;
        background: #002f26;
        color: white;
      }

      .mbaOption {
        align-self: start;
      }

      .clgBorderBox {
        border-right: none;
      }
    }

    @media only screen and (max-width: 768px) {
      .clgBorderBox {
        border-right: none;
      }

      .TopClg {
        font-size: 25px;
      }

      .slider {
        height: fit-content;
      }

      .midLine {
        display: none;
      }

      .searchOption {
        line-height: 14px;
        border-radius: 20px !important;
        width: 90%;
        padding: 9px;
        border: 0.4000000059604645px solid #707070;
        box-shadow: 0px 0px 8px #00000029;
      }
    }
  </style>
  <div class="slider">
    <div id="carouselExampleSlidesOnly" class="carousel slide" data-bs-ride="carousel" style="opacity: 0.7">
      <div class="carousel-inner">
        <% banners.forEach((banner, index)=> { %>
          <div class="carousel-item <%= index === 0 ? 'active' : '' %>">
            <img src="<%= banner.image %>" class="d-block w-100" alt="Banner <%= index + 1 %>" />
          </div>
          <% }); %>
      </div>
    </div>

    <div class="slider-top d-flex align-items-center">
      <div class="container">
        <div class="d-flex flex-direction-row align-items-center justify-content-md-between justify-content-center">
          <div>
            <p class="sk-confused text-start mt-3 fs-1">
              Top colleges from <%= city %>
            </p>
            <button type="button" class="btn fs-2 rounded-pill text-white fw-bold shadow-lg eligibility_btn"
              style="backdrop-filter: blur(5px)"
              onclick="document.getElementById('exampleModal').scrollIntoView({ behavior: 'smooth',block:'center' });"
              data-bs-toggle="modal" data-bs-target="#exampleModal" data-bs-whatever="@mdo">
              Let us select for you
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- below slider -->
  <style>
    .label {
      cursor: pointer;
      padding: 10px;
    }

    .label input[type="radio"]:checked+span {
      background-color: #007bff;
      color: white;
    }
  </style>
  <div class="container my-5 border border-1 sk-topclg">
    <div class="container mt-4 mb-md-4">
      <div class="row">
        <div class="col-md-9 mb-1">
          <div class="input-group">
            <input type="text" class="form-control mb-0 shadow-none" aria-label="search" placeholder="Search Colleges"
              id="searchInput" />
            <span class="input-group-text text-white" style="
              background: #002f26;
              border: 2px solid #002f26;
              cursor: pointer;
            " onclick="searchColleges()">
              <i class="fa-solid fa-magnifying-glass"></i>
            </span>
            <span class="input-group-text rounded-start rounded-pill text-white" style="
              background: #002f26;
              border: 2px solid #002f26;
              cursor: pointer;
            " onclick="searchColleges()">Search</span>
          </div>
        </div>
        <div class="col-md-3 mb-3 position-relative">
          <div data-bs-toggle="collapse" data-bs-target="#fillter" aria-expanded="false" aria-controls="fillter">
            <div class="fw-bold text-center border-dark border Compare-filter w-100 p-1 p-md-1 border-1 rounded-pill"
              style="cursor: pointer">
              <p class="fs-5">Fillter</p>
            </div>
          </div>
          <!-- fillter box start-->
          <form>
            <div class="border fillterBox shadow-lg rounded p-3 collapse position-absolute" id="fillter">
              <span data-bs-toggle="collapse" data-bs-target="#fillter" aria-expanded="false" aria-controls="fillter"><i
                  class="fa-solid fa-xmark d-flex justify-content-end" style="cursor: pointer"></i></span>
              <div class="my-3 w-100">
                <p class="fw-bold text-start text-md-center">Fee Structure</p>
                <div class="d-flex justify-content-evenly flex-wrap">
                  <span class="border text-center" style="width: 100px">
                    <label class="d-block w-100 h-100 m-0 label">
                      <input type="radio" name="fees" value="2LPA" class="d-none" />
                      <span>&lt;2LPA</span>
                    </label>
                  </span>
                  <span class="border text-center" style="width: 100px">
                    <label class="d-block w-100 h-100 m-0 label">
                      <input type="radio" name="fees" value="5LPA" class="d-none" />
                      <span>5LPA</span>
                    </label>
                  </span>
                  <span class="border text-center" style="width: 100px">
                    <label class="d-block w-100 h-100 m-0 label">
                      <input type="radio" name="fees" value="7LPA" class="d-none" />
                      <span>7LPA</span>
                    </label>
                  </span>
                  <span class="border text-center" style="width: 100px">
                    <label class="d-block w-100 h-100 m-0 label">
                      <input type="radio" name="fees" value="9LPA" class="d-none" />
                      <span>9LPA</span>
                    </label>
                  </span>
                  <span class="border text-center" style="width: 100px">
                    <label class="d-block w-100 h-100 m-0 label">
                      <input type="radio" name="fees" value="10LPA" class="d-none" />
                      <span>&gt;10LPA</span>
                    </label>
                  </span>
                </div>
              </div>

              <div class="my-3">
                <p class="fw-bold text-start text-md-center m-1">
                  Precentage of Marks
                </p>
                <div class="d-flex justify-content-evenly flex-wrap">
                  <span class="border text-center" style="width: 100px">
                    <label class="d-block w-100 h-100 m-0 label">
                      <input type="radio" name="marks" value=">50%" class="d-none" />
                      <span>&lt;50%</span>
                    </label>
                  </span>
                  <span class="border text-center" style="width: 100px">
                    <label class="d-block w-100 h-100 m-0 label">
                      <input type="radio" name="marks" value=">50%" class="d-none" />
                      <span>50%-60%</span>
                    </label>
                  </span>
                  <span class="border text-center" style="width: 100px">
                    <label class="d-block w-100 h-100 m-0 label">
                      <input type="radio" name="marks" value=">50%" class="d-none" />
                      <span>60%-70%</span>
                    </label>
                  </span>
                  <span class="border text-center" style="width: 100px">
                    <label class="d-block w-100 h-100 m-0 label">
                      <input type="radio" name="marks" value=">50%" class="d-none" />
                      <span>70%-80%</span>
                    </label>
                  </span>
                  <span class="border text-center" style="width: 100px">
                    <label class="d-block w-100 h-100 m-0 label">
                      <input type="radio" name="marks" value=">50%" class="d-none" />
                      <span>&gt;80%</span>
                    </label>
                  </span>
                </div>
              </div>

              <div class="d-flex my-3 justify-content-between flex-wrap">
                <div class="d-flex flex-column align-items-center filterDiv my-3">
                  <p class="text-start text-md-center w-75 fw-bold">
                    Filter by Courses
                  </p>
                  <input list="courseNames" name="courseName" class="text-center w-75 Compare-filter"
                    placeholder="Choose a course" />
                  <datalist id="courseNames">
                    <option value="None">
                      <% filtercourses.forEach(function(course){ %>
                    </option>
                    <option value="<%= course %>">
                      <% }); %>
                    </option>
                  </datalist>
                </div>
                <div class="d-flex flex-column align-items-center filterDiv my-3">
                  <p class="text-start text-md-center w-75 fw-bold">
                    Filter by Location
                  </p>
                  <input list="cityNames" name="city" class="text-center w-75 Compare-filter"
                    placeholder="Choose a city" />
                  <datalist id="cityNames">
                    <option value="None">
                      <% filtercities.forEach(function(city){ %>
                    </option>

                    <option value="<%= city %>">
                      <% }); %>
                    </option>
                  </datalist>
                </div>
              </div>
              <div class="d-flex my-3 justify-content-center align-items-center">
                <div class="me-3">
                  <button type="submit" class="btn py-2 px-3 mt-0 me-1 bg-light">
                    Submit
                  </button>
                </div>
                <div class="ms-1">
                  <button type="reset" class="btn py-2 px-3 mt-0 ms-1 bg-light">
                    Clear all filter
                  </button>
                </div>
              </div>
            </div>
          </form>
        </div>
        <!-- fillter div end -->
      </div>
    </div>

    <script>
      // Get the filter div element
      const filterDiv = document.getElementById("fillter");

      // Close the filter div when clicking outside of it
      window.addEventListener("click", function (event) {
        if (!filterDiv.contains(event.target)) {
          filterDiv.classList.remove("show");
        }
      });

      // SEARCH FUNCTIONALITY
      function searchColleges() {
        const searchQuery = document.getElementById("searchInput").value;
        window.location.href = `/topclg?city=<%= city %>&search=${searchQuery}`;
      }
    </script>

    <!-- <div class="row"> -->
    <div class="container mt-md-4 mb-4">
      <div class="row me-0">
        <div class="col-md-6 mb-1">
          <div class="input-group form-control p-0 border border-1 rounded-pill shadow-none">
            <input type="text" class="form-control border-0 shadow-none" placeholder="Choose College"
              aria-label="Username" />
            <span class="input-group-text border-0"><i class="fa-solid fa-arrow-right-arrow-left"></i></span>
            <input type="text" class="form-control border-0 shadow-none" placeholder="Choose College"
              aria-label="Server" />
          </div>
        </div>
        <div class="col-md-2 mb-1">
          <button type="submit" id="compareBtn" class="btn shadow-none border border-1" style="padding: 10px"
            onclick="var div=document.getElementById('myDiv'); var button=document.querySelector('#compareBtn'); if(div.style.display==='none'){div.style.display='flex'; button.innerHTML='Close';} else{div.style.display='none'; button.innerHTML='Compare';}">
            Compare
          </button>
        </div>
        <div class="col-md-4 row border border-1 p-0 ms-1 rounded-pill py-3" style="font-size: x-small">
          <button class="col-4 border-0 bg-body rounded-pill p-0">
            <i class="fa-solid fa-arrow-up-wide-short"></i> Fee high to low
          </button>
          <button class="col-4 border-0 bg-body rounded-pill p-0">
            <i class="fa-solid fa-arrow-up-short-wide"></i> Fee low to high
          </button>
          <button class="col-4 border-0 bg-body rounded-pill p-0">
            <i class="fa-solid fa-star"></i> Popularity
          </button>
        </div>
      </div>
    </div>

    <!-- Compare div start -->
    <div id="myDiv" class="row">
      <div class="col-6 border border-1 rounded-3 p-3">
        <div class="row">
          <div class="col-12 col-md-4 m-auto border border-1" style="height: 120px; width: 150px">
            <img src="image/clg2.png" alt="phto" class="w-100 h-100" />
          </div>
          <div class="col-12 col-md-8">
            <p class="fw-bold text-center text-md-start">
              Department of Management Studies IIT Delhi [DMS IITD], New Delhi
            </p>
            <p>Course Fee: <span style="color: #f7931e">100000</span></p>
            <p>Course Name: <span>MBA/PGDM</span></p>
            <p>Recommended Marks: <span>60%</span></p>
          </div>
        </div>
        <div class="row">
          <div class="col-12 col-md-6 d-flex flex-column justify-content-md-center">
            <button type="button" class="btn m-2 w-100 text-white" style="background-color: #002f26">
              Apply Now
            </button>
          </div>
          <div class="col-12 col-md-6 d-flex flex-column justify-content-md-center">
            <button type="button" class="btn m-2 w-100">Download Brochure</button>
          </div>
        </div>

        <div class="">
          <p><i class="fa-solid fa-check me-3"></i> Near Delhi</p>
          <p><i class="fa-solid fa-xmark me-3"></i> Hostel Availability</p>
          <p><i class="fa-solid fa-check me-3"></i> College GYM</p>
          <p><i class="fa-solid fa-xmark me-3"></i> Open Library</p>
          <p><i class="fa-solid fa-xmark me-3"></i> College Bank</p>
          <p><i class="fa-solid fa-check me-3"></i> Hospital Facility</p>
          <p><i class="fa-solid fa-xmark me-3"></i> Police station</p>
          <p><i class="fa-solid fa-check me-3"></i> College Transportation</p>
          <p><i class="fa-solid fa-check me-3"></i> Workshops</p>
          <p><i class="fa-solid fa-check me-3"></i> Tech Facility</p>
          <p><i class="fa-solid fa-xmark me-3"></i> College Guest</p>
          <p>
            <i class="fa-solid fa-check me-3"></i> House In Campus shop, canteen
          </p>
        </div>
      </div>
      <div class="col-6 border border-1 rounded-3 p-3">
        <div class="row">
          <div class="col-12 col-md-4 m-auto border border-1" style="height: 120px; width: 150px">
            <img src="image/clg2.png" alt="img" class="w-100 h-100" />
          </div>
          <div class="col-12 col-md-8">
            <p class="fw-bold text-center text-md-start">
              Department of Management Studies IIT Delhi [DMS IITD], New Delhi
            </p>
            <p>Course Fee: <span style="color: #f7931e">100000</span></p>
            <p>Course Name: <span>MBA/PGDM</span></p>
            <p>Recommended Marks: <span>60%</span></p>
          </div>
        </div>
        <div class="row">
          <div class="col-12 col-md-6 d-flex flex-column justify-content-md-center">
            <button type="button" class="btn m-2 w-100 text-white" style="background-color: #002f26">
              Apply Now
            </button>
          </div>
          <div class="col-12 col-md-6 d-flex flex-column justify-content-md-center">
            <button type="button" class="btn m-2 w-100">Download Brochure</button>
          </div>
        </div>

        <div class="">
          <p><i class="fa-solid fa-check me-3"></i> Near Delhi</p>
          <p><i class="fa-solid fa-xmark me-3"></i> Hostel Availability</p>
          <p><i class="fa-solid fa-check me-3"></i> College GYM</p>
          <p><i class="fa-solid fa-xmark me-3"></i> Open Library</p>
          <p><i class="fa-solid fa-xmark me-3"></i> College Bank</p>
          <p><i class="fa-solid fa-check me-3"></i> Hospital Facility</p>
          <p><i class="fa-solid fa-xmark me-3"></i> Police station</p>
          <p><i class="fa-solid fa-check me-3"></i> College Transportation</p>
          <p><i class="fa-solid fa-check me-3"></i> Workshops</p>
          <p><i class="fa-solid fa-check me-3"></i> Tech Facility</p>
          <p><i class="fa-solid fa-xmark me-3"></i> College Guest</p>
          <p>
            <i class="fa-solid fa-check me-3"></i> House In Campus shop, canteen
          </p>
        </div>
      </div>
    </div>
    <!-- Compare div end -->

    <style>
      .selection {
        background: #fdfdfd;
        margin: 1px 5px 1px 5px;
        border-radius: 15px;
        text-align: center;
        padding: 5px 10px;
        min-width: fit-content;
        max-width: 151px;
        box-shadow: 0px 0px 1px;
        font-size: small;
      }

      /* Hide scrollbar for Chrome, Safari and Opera */
      .scrollable-section::-webkit-scrollbar {
        display: none;
      }

      /* Hide scrollbar for IE, Edge and Firefox */
      .scrollable-section {
        -ms-overflow-style: none;
        /* IE and Edge */
        scrollbar-width: none;
        /* Firefox */
      }

      .scroll-button {
        border: none;
        background: none;
        font-size: smaller;
      }
    </style>
    <div class="container row p-0" style="margin: 15px 0 15px 0">
      <div class="col-md-2">
        <p>Filtered Results:</p>
      </div>
      <div class="col-md-10" style="
        overflow: hidden;
        user-select: none;
        display: flex;
        align-items: center;
      ">
        <button class="scroll-button left-button" onclick="scrollContainer.scrollBy(-200, 0)" style="flex-shrink: 0">
          <i class="fa-solid fa-chevron-left"></i>
        </button>
        <div class="d-flex justify-content-between scrollable-section" style="overflow-x: auto; flex-grow: 1"
          id="scrollContainer">
          <div class="selection">
            <p>State: New Delhi</p>
          </div>
          <div class="selection">
            <p>City: Connaught Place</p>
          </div>
          <div class="selection">
            <p>Fee: 1Lpa - 2Lpa</p>
          </div>
          <div class="selection">
            <p>Marks: 70 - 80%</p>
          </div>
          <div class="selection">
            <p>Course: MBA</p>
          </div>
          <div class="selection">
            <p>MBA Type: MBA/PGDM</p>
          </div>
          <div class="selection">
            <p>Specialisation: Sales & marketing management</p>
          </div>
        </div>
        <button class="scroll-button right-button" onclick="scrollContainer.scrollBy(200, 0)" style="flex-shrink: 0">
          <i class="fa-solid fa-chevron-right"></i>
        </button>
      </div>
    </div>
  </div>

  <script>
    // JavaScript code for scroll functionality
    var scrollContainer = document.getElementById("scrollContainer");
    var isMouseDown = false;
    var scrollLeft = 0;
    var mouseX = 0;

    scrollContainer.addEventListener("mousedown", function (event) {
      isMouseDown = true;
      mouseX = event.pageX;
      scrollLeft = scrollContainer.scrollLeft;
    });

    scrollContainer.addEventListener("mouseup", function () {
      isMouseDown = false;
    });

    scrollContainer.addEventListener("mouseleave", function () {
      isMouseDown = false;
    });

    scrollContainer.addEventListener("mousemove", function (event) {
      if (!isMouseDown) return;
      var movementX = event.pageX - mouseX;
      scrollContainer.scrollLeft = scrollLeft - movementX;
    });
  </script>

  <div class="container my-5 border border-1 sk-topclg">
    <div class="pt-3">
      <div class="m-0">
        <div class="border text-center mb-2">
          <div class="row clgInfo2 d-none d-md-flex">
            <div class="col-8 py-3 px-0" style="border-right: 1px solid">
              <h4>College Name</h4>
            </div>
            <div class="col-4 py-3 px-0">
              <h4>Information</h4>
            </div>
          </div>
          <div class="py-3 d-md-none">
            <h4>College Information</h4>
          </div>
        </div>
        <% colleges.map((clg,idx)=> { %>
          <div class="clgInfoBox">
            <div>
              <a href="/view/<%= clg.college_id %>" class="text-decoration-none text-black">
                <div class="border border-1 border-black p-1 p-md-0 row m-auto px-1 px-md-3 justify-content-between">
                  <div
                    class="d-flex flex-wrap clgBorderBox align-items-center col-12 col-md-8 p-md-1 row m-auto m-md-0 px-0 px-lg-3">
                    <div class="col-3 p-0">
                      <div class="" style="aspect-ratio: 16/9">
                        <img class="w-100 h-100" src="<%= process.env.APP_URL %><%= clg.college_logo %>" alt="" />
                      </div>
                    </div>
                    <div class="col-9">
                      <h6 class="fw-bold">
                        <%= clg.college_name %> [<%= clg.college_sname %>], <%= clg.college_city %>
                      </h6>
                      <div class="col-9">
                        <p class="minipara mt-1 col-12 col-md-4">
                          <%= clg.college_address %>
                        </p>
                        <p class="minipara col-12 col-md-4">
                          AICTE, UGC, NBA Approved
                        </p>
                      </div>
                    </div>
                    <div class="row justify-content-between">
                      <div class="col-4">
                        <span class="text-center text-md-center text-lg-start">
                          <i class="fa-solid fa-user"> </i>
                          8.7/10
                        </span>
                      </div>
                    </div>
                  </div>
                  <div class="row my-1 col-12 col-md-4 m-auto p-0">
                    <p class="col-sm-6 col-12 p-0 col-md-12 px-md-2 text-center text-md-start">
                      <span class="fw-bold">Course Fee:</span> Rs <%= clg.coursefee %>
                    </p>
                    <p class="col-sm-6 col-12 p-0 col-md-12 px-md-2 text-md-start text-center">
                      <span class="fw-bold">Course Name:</span>
                      <%= clg.course_name %>
                    </p>
                    <form action="/compare"
                      class="col-12 d-flex align-items-center justify-content-center justify-content-md-start">
                      <input style="width: 15px; margin: 5px" type="checkbox" id="vehicle1" name="" value="" />
                      <label for="vehicle1">
                        <p class="minipara fw-bold">Add to compare</p>
                      </label>
                    </form>
                  </div>
                </div>
              </a>
            </div>
            <div class="minisection1 mb-3 py-2 d-flex justify-content-between row">
              <div class="d-flex flex-row align-items-center justify-content-center col-6 col-md-8">
                <i class="fa-sharp fa-solid fa-check text-warning"></i>
                <span class="minipara hoverefct" data-bs-toggle="modal" data-bs-target="#exampleModal"
                  data-bs-whatever="@mdo" style="cursor: pointer">Apply Now</span>
                <i class="fa-solid fa-arrow-right text-warning"></i>
              </div>
              <div class="d-flex justify-content-center col-6 col-md-4">
                <a class="minipara hoverefct" data-bs-toggle="modal" data-bs-target="#exampleModal"
                  data-bs-whatever="@mdo" style="cursor: pointer" id="hoverefct">
                  <div class="d-flex flex-row d-flex justify-content-around align-items-center">
                    <span>Download Brochure</span>
                    <i class="fa-solid fa-arrow-right text-warning"></i>
                  </div>
                </a>
              </div>
            </div>
          </div>
          <% })%>
      </div>
      <div class="d-flex my-4 justify-content-md-end justify-content-center w-100">
        <% if (page> 1) { %>
          <a href="?city=<%= city %>&page=<%= page - 1 %>" class="minipara">Previous Page</a>
          <% } %>
            <% if (page < totalPages) { %>
              <a href="?city=<%= city %>&page=<%= page + 1 %>" class="minipara mx-3">Next Page</a>
              <% } %>
      </div>
    </div>
  </div>

  <%- include('foot') %>